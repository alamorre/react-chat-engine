(this["webpackJsonpreact-chat-engine-example"]=this["webpackJsonpreact-chat-engine-example"]||[]).push([[0],{38:function(e,t,n){e.exports=n(86)},39:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);n(39);var a=n(0),r=n.n(a),o=n(12),s=n.n(o),i=n(34),l=n(9),c=n.n(l),p=n(5),h=n.n(p),u=n(88),d=n(89),m=n(90),f=n(91),g=n(92),v=n(93),x=n(94),y=n(95),E=n(96),C=n(1),b=n(35);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function M(e){var t=e.publicKey,n=e.userName,a=e.userPassword,r=e.development,o=r?"ws://":"wss://",s=r?"127.0.0.1:8000":"api.chatengine.io";console.log(""+o+s+"/person/?publicKey="+t+"&username="+n+"&secret="+a);var l=new i.a(""+o+s+"/person/?publicKey="+t+"&username="+n+"&secret="+a);return l.onopen=function(t){console.log("User socket connect",t),e.onConnect&&e.onConnect(e)},l.onerror=function(t){console.log("User socket error",t),"TIMEOUT"===t.message&&e.onFailAuth&&e.onFailAuth(e)},l.onmessage=function(t){var n=JSON.parse(t.data);console.log("action",n.action),"new_chat"===n.action?e.onNewChat&&e.onNewChat(n.data):"edit_chat"===n.action?e.onEditChat&&e.onEditChat(n.data):"delete_chat"===n.action?e.onDeleteChat&&e.onDeleteChat(n.data):"add_person"===n.action?e.onAddPerson&&e.onAddPerson(n.data):"remove_person"===n.action?e.onRemovePerson&&e.onRemovePerson(n.data):"new_message"===n.action?e.onNewMessage&&e.onNewMessage(n.data.id,n.data.messages):"edit_message"===n.action?e.onEditMessage&&e.onEditMessage(n.data.id,n.data.messages):"delete_message"===n.action&&e.onDeleteMessage&&e.onDeleteMessage(n.data.id,n.data.messages)},l}var A,k,R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={rws:null},t}S(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.publicKey?this.setState({rws:M(this.props)}):console.log("You need an API key. Register for one here: https://chatengine.io")},n.componentWillUnmount=function(){this.state.rws.close()},n.render=function(){return r.a.createElement("div",null)},t}(a.Component);function N(e){return e.development?"http://127.0.0.1:8000":"https://api.chatengine.io"}function P(e,t,n,a){h.a.patch(N(e)+"/chats/"+t+"/people/",{last_read:n},{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userPassword}}).then((function(e){a&&a(e.data)})).catch((function(e){console.log("Send Messages Error",e)}))}var D,T,F,z=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={hovered:!1},t}return S(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.value,a=t.icon,o=t.theme,s=t.style,i="danger"==o?I.dangerButton:I.button,l=s||{},c=this.state.hovered?I.hoverButton:{};return r.a.createElement("button",{type:this.props.type,onClick:function(){return e.props.onClick&&e.props.onClick()},onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:w({},i,l,c)},"plus"==a&&r.a.createElement(u.a,null),"send"==a&&r.a.createElement(d.a,null),"delete"==a&&r.a.createElement(m.a,null),"user-add"==a&&r.a.createElement(f.a,null),n&&a?" "+n:n)},t}(a.Component),I={button:(A={color:"white",border:"none",outline:"none",height:"36px",fontSize:"15px",cursor:"pointer",borderRadius:"4px",padding:"8px 16px"},A.borderRadius="24px",A.backgroundColor="#1890ff",A),dangerButton:(k={color:"red",border:"none",outline:"none",height:"36px",fontSize:"15px",cursor:"pointer",borderRadius:"4px",padding:"8px 16px"},k.borderRadius="24px",k.backgroundColor="white",k.border="2px solid red",k),hoverButton:{opacity:"0.66"}},_=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={focused:!1,value:null},t}S(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.default;if(e){var t={target:{value:e}};this.props.handleChange(t),this.setState({value:e})}},n.render=function(){var e=this,t=this.props.style?this.props.style:{},n=this.state.focused?U.focusInput:U.input;return r.a.createElement("input",{value:this.props.value,placeholder:this.props.label,style:w({},n,t),onBlur:function(){return e.setState({focused:!1})},onFocus:function(){return e.setState({focused:!0})},type:this.props.type?this.props.type:"text",onChange:function(t){return e.props.handleChange&&e.props.handleChange(t)}})},t}(a.Component),U={input:(D={outline:"none",height:"36px",fontSize:"15px",padding:"0px 12px",borderRadius:"4px"},D.borderRadius="24px",D.border="1px solid #d9d9d9",D),focusInput:(T={outline:"none",height:"36px",fontSize:"15px",padding:"0px 12px",borderRadius:"4px"},T.borderRadius="24px",T.border="1px solid #1890ff",T)},K=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={focused:!1,value:null},t}S(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.default;e&&(this.props.handleChange({target:{value:e}}),this.setState({value:e}))},n.resize=function(){var e=document.getElementById("msg-textarea");e.style.height="",e.style.height=Math.min(e.scrollHeight,150)+"px"},n.componentDidMount=function(){this.resize()},n.handleChange=function(e){this.resize(),this.props.handleChange&&this.props.handleChange(e)},n.onKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),this.props.value.length>0&&this.props.onSubmit&&this.props.onSubmit(e))},n.render=function(){var e=this;return r.a.createElement("textarea",{id:"msg-textarea",style:L.input,value:this.props.value,placeholder:this.props.label,onBlur:function(){return e.setState({focused:!1})},onFocus:function(){return e.setState({focused:!0})},type:this.props.type?this.props.type:"text",onChange:function(t){return e.handleChange(t)},onKeyDown:function(t){return e.onKeyDown(t)}})},t}(a.Component),L={input:{borderRadius:"10px",border:"1px solid white",width:"calc(100% - 64px - 24px - 44px)",resize:"none",outline:"none",top:"12px",left:"12px",position:"relative",paddingLeft:"12px",paddingRight:"12px",fontFamily:"inherit"}},B=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={value:""},t}S(t,e);var n=t.prototype;return n.handleChange=function(e){this.setState({value:e.target.value})},n.handleSubmit=function(e){var t,n,a,r=this;e.preventDefault(),t=this.props.creds,n={title:this.state.value},a=function(){return r.setState({value:""})},h.a.post(N(t)+"/chats/",n,{headers:{"Public-Key":t.publicKey,"User-Name":t.userName,"User-Secret":t.userPassword}}).then((function(e){a&&a(e.data)})).catch((function(e){console.log("New Chat Error",e)}))},n.render=function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{style:{width:"calc(100% - 26px)",border:"1px solid #d9d9d9",borderRadius:"24px",backgroundColor:"white"}},r.a.createElement("div",{style:{height:"0px"}},r.a.createElement(_,{label:"New Chat",value:this.state.value,style:{width:"calc(100% - 26px - 48px)",borderColor:"white"},handleChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{style:{width:"100%",textAlign:"right",marginTop:"1px"}},r.a.createElement(z,{icon:"plus",type:"submit"}))))},t}(r.a.Component),O=function(e){function t(){return e.apply(this,arguments)||this}S(t,e);var n=t.prototype;return n.renderChats=function(e){var t=this;return c.a.map(e,(function(e,n){var a,o=e&&t.props.activeChat===e.id?G.activeChat:{};return e?r.a.createElement("div",{key:"chat_"+n,onClick:function(){return t.props.onChatClick(e.id)},style:w({},G.chatContainer,o)},r.a.createElement("div",{style:G.titleText},e.title),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:G.messageText},e.last_message.text?e.last_message.text:"Say hello!"),r.a.createElement("div",{style:w({},G.messageText,{float:"right",textAlign:"right",width:"25%",position:"relative",bottom:"17px"})},(a=e.last_message.created,Date(a).substr(4,6))))):r.a.createElement("div",null)}))},n.render=function(){return r.a.createElement("div",{style:G.chatListContainer},r.a.createElement("div",{style:G.chatsContainer},this.renderChats(this.props.chats),r.a.createElement("div",{style:{height:"64px"}}),this.props.renderNewChatForm?this.props.renderNewChatForm():r.a.createElement("div",{style:G.newChatContainer},r.a.createElement(B,{creds:this.props.creds}))))},t}(a.Component),G={chatListContainer:{height:"100%",maxHeight:"100vh",overflow:"scroll",borderRight:"1px solid #afafaf",backgroundColor:"white"},chatsContainer:{width:"100%",backgroundColor:"white",borderRadius:"0px 0px 24px 24px"},chatContainer:{padding:"16px",cursor:"pointer"},titleText:{fontWeight:"500",paddingBottom:"4px",whiteSpace:"nowrap",overflow:"hidden"},messageText:{width:"75%",color:"rgba(153, 153, 153, 1)",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden"},activeChat:{backgroundColor:"#d9d9d9",border:"4px solid white",borderRadius:"12px"},newChatContainer:{position:"absolute",bottom:"0px",width:"100%",padding:"12px"}},j=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=this.props.chat;return e?r.a.createElement("div",{style:{position:"absolute",top:"0px",width:"100%",zIndex:"999"}},r.a.createElement("div",{style:W.titleContainer},r.a.createElement("div",{style:W.titleText},e&&e.title),r.a.createElement("div",{style:W.subtitleText},"Active ",function(e){var t=Date(e);return t.substr(0,10)+" at "+t.substr(15,6)}(e.last_message.created)))):r.a.createElement("div",null)},t}(a.Component),W={titleContainer:{padding:"18px",textAlign:"center",color:"rgb(24, 144, 255)",backgroundColor:"rgb(256, 256, 256, 0.92)"},titleText:{fontSize:"24px",fontWeight:"600"},subtitleText:{fontSize:"12px"}},H=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){return r.a.createElement("div",{style:{height:"100%",textAlign:"center"}},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("img",{style:{width:"40%",paddingTop:"25vh"},src:"https://chat-engine-assets.s3.amazonaws.com/denied.svg",alt:"welcome-to-chat-engine"})),r.a.createElement("div",{style:{fontSize:"18px",paddingTop:"24px",width:"75%",paddingLeft:"12.5%"}},"Your credentials are incorrect. Make sure your Public Key, Username, and Password are correct at ",r.a.createElement("a",{href:"https://chatengine.io"},"chatengine.io")))},t}(a.Component),J=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){return r.a.createElement(g.a,{style:{width:"100%",position:"relative",top:"calc(50% - 26px)",textAlign:"center",fontSize:"52px"}})},t}(a.Component),q=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){return r.a.createElement("div",{style:{height:"100%",textAlign:"center"}},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("img",{style:{width:"60%",paddingTop:"33vh"},src:"https://chat-engine-assets.s3.amazonaws.com/welcome.svg",alt:"welcome-to-chat-engine"})),r.a.createElement("div",{style:{fontSize:"18px",paddingTop:"24px",width:"75%",paddingLeft:"12.5%"}},'Fill out the "New Chat" form to get started.'))},t}(a.Component),Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q=["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],V=function(e){function t(){return e.apply(this,arguments)||this}S(t,e);var n=t.prototype;return n.getDate=function(e){return e?e.substr(0,10):null},n.formatDate=function(e){var t=e.substr(0,4),n=Y[parseInt(e.substr(5,2))-1],a=e.substr(8,2),r=Q[parseInt(e.substr(8,2))-1],o=e.substr(11,5),s="";return parseInt(o.substr(0,2))>=12?(parseInt(o.substr(0,2))>12&&(o=String(parseInt(o.substr(0,2))-12)+":"+o.substr(3,2)),s="PM"):s="AM",o+s+", "+n+" "+a+r+", "+t},n.render=function(){var e=this.props,t=e.lastCreated,n=e.created,a=this.getDate(t),o=this.getDate(n);return t&&a===o?r.a.createElement("div",null):r.a.createElement("div",{style:X.dateText},this.formatDate(n))},t}(a.Component),X={dateText:{width:"100%",textAlign:"center",paddingTop:"4px",paddingBottom:"10px",fontSize:"15px",color:"rgba(0, 0, 0, .40)"}},Z=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=this.props.attachment;return r.a.createElement("img",{style:$.thumbnail,src:e.file,alt:"image"})},t}(a.Component),$={thumbnail:(F={width:"100%",cursor:"pointer",textAlign:"right",display:"inline",objectFit:"cover",borderRadius:"0.3em",paddingRight:"2px",height:"30vw"},F.width="30vw",F.maxHeight="200px",F.maxWidth="200px",F.minHeight="100px",F.minWidth="100px",F)},ee=["#D64045","#5B3000","#00CC99","#467599","#1D3354","#8F250C","#6153CC","#961D4E","#A29F15","#0CAADC","#FF5154","#FA7921","#688E26","#550527","#A10702","#FF1053","#6C6EA0","#100B00"];function te(e){return ee[function(e){for(var t=0,n=0;n<e.length;n++)t=t+e.charCodeAt(n)*n-97;return t}(e)%ee.length]}var ne=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=this.props.style?this.props.style:{},t=te(this.props.text);return r.a.createElement("div",{style:w({},ae.avatar,e,{backgroundColor:t})})},t}(a.Component),ae={avatar:{width:"10px",height:"10px",borderRadius:"22px",textAlign:"center"}};Object(C.setConfiguration)({maxScreenClass:"xl"});var re=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={selected:!1},t}S(t,e);var n=t.prototype;return n.renderReads=function(){var e=this.props,t=e.chat,n=e.message;return t.people.map((function(e,t){if(n.id==e.last_read)return r.a.createElement(ne,{key:"read_"+t,text:e.person,style:{float:"right",marginLeft:"4px"}})}))},n.renderAttachments=function(e){return(this.props.message?this.props.message.attachments:[]).map((function(t,n){return r.a.createElement(Z,{attachment:t,key:"attachment_"+n,borderRadius:e})}))},n.render=function(){var e=this,t=this.props,n=t.lastMessage,a=t.message,o=t.nextMessage;if(!a)return r.a.createElement("div",null);var s="1.3em "+(n&&n.sender===a.sender?"0.3em":"1.3em")+" "+(o&&o.sender===a.sender?"0.3em":"1.3em")+" 1.3em",i=o&&o.sender===a.sender?"2px":"12px";return r.a.createElement("div",{style:{width:"100%",textAlign:"right",paddingBottom:i},onMouseEnter:function(){return e.setState({selected:!0})},onMouseLeave:function(){return e.setState({selected:!1})}},r.a.createElement("div",{style:{display:"auto"}},this.renderAttachments()),r.a.createElement(C.Row,{style:{paddingRight:"2px"}},r.a.createElement(C.Col,{xs:1,sm:2,md:3}),r.a.createElement(C.Col,{xs:11,sm:10,md:9},r.a.createElement("div",{style:w({},oe.myMessage,{borderRadius:s})},a.text)),r.a.createElement(C.Col,{xs:1,sm:2,md:3}),r.a.createElement(C.Col,{xs:12},this.renderReads())))},t}(a.Component),oe={myMessage:{color:"white",cursor:"pointer",float:"right",textAlign:"left",padding:"12px",fontSize:"15px",whiteSpace:"pre-line",backgroundColor:"rgb(24, 144, 255)"}},se=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=this.props.style?this.props.style:{},t=this.props.text.substring(0,2).toUpperCase(),n=te(this.props.text);return r.a.createElement("div",{style:w({},ie.avatar,e,{backgroundColor:n})},r.a.createElement("div",{style:{color:"white",paddingTop:"12px",fontSize:"15px",fontWeight:"600"}},t))},t}(a.Component),ie={avatar:{width:"44px",height:"44px",borderRadius:"22px",color:"white",textAlign:"center"}};Object(C.setConfiguration)({maxScreenClass:"xl"});var le=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={selected:!1},t}S(t,e);var n=t.prototype;return n.renderReads=function(){var e=this.props,t=e.chat,n=e.message;return t.people.map((function(e,t){if(n.id==e.last_read)return r.a.createElement(ne,{key:"read_"+t,text:e.person,style:{float:"left",marginLeft:"4px"}})}))},n.renderAttachments=function(e){return(this.props.message?this.props.message.attachments:[]).map((function(t,n){return r.a.createElement(Z,{attachment:t,key:"attachment_"+n,borderRadius:e})}))},n.render=function(){var e=this,t=this.props,n=t.lastMessage,a=t.message,o=t.nextMessage;if(!a)return r.a.createElement("div",null);var s=(n&&n.sender===a.sender?"0.3em":"1.3em")+" 1.3em 1.3em "+(o&&o.sender===a.sender?"0.3em":"1.3em"),i=o&&o.sender===a.sender?"2px":"12px";return r.a.createElement("div",{style:{width:"100%",paddingBottom:i}},(!n||n.sender!==a.sender)&&r.a.createElement("div",{style:ce.nameText},a.sender),r.a.createElement("div",{style:{display:"auto",paddingLeft:"50px"}},this.renderAttachments()),r.a.createElement(C.Row,{style:{paddingLeft:"2px"}},r.a.createElement(C.Col,{xs:11,sm:10,md:9},r.a.createElement("div",{style:{height:"0px"}},o&&o.sender===a.sender?r.a.createElement("div",null):r.a.createElement(se,{text:a.sender})),r.a.createElement("div",{style:{paddingLeft:"48px"}},r.a.createElement("div",{style:w({},ce.theirMessage,{borderRadius:s}),onMouseEnter:function(){return e.setState({selected:!0})},onMouseLeave:function(){return e.setState({selected:!1})}},a.text))),r.a.createElement(C.Col,{xs:9,style:{marginLeft:"48px"}},this.renderReads())))},t}(a.Component),ce={theirMessage:{cusor:"auto",color:"black",float:"left",padding:"12px",fontSize:"15px",whiteSpace:"pre-line",backgroundColor:"#f1f0f0"},nameText:{paddingLeft:"62px",paddingBottom:"2px",color:"rgba(0, 0, 0, .40)",fontSize:"15px"}},pe=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={selected:!1},t}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.creds,n=e.chat,a=e.lastMessage,o=e.message,s=e.nextMessage;return o?r.a.createElement("div",null,r.a.createElement(V,{lastCreated:a?a.created:null,created:o.created}),o.sender==t.userName?r.a.createElement(re,{chat:n,creds:t,lastMessage:a,message:o,nextMessage:s}):r.a.createElement(le,{chat:n,creds:t,lastMessage:a,message:o,nextMessage:s})):r.a.createElement("div",null)},t}(a.Component),he=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={hovered:!1},t}return S(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",{style:{padding:"12px 6px",display:"inline"},onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},r.a.createElement("img",{style:ue.imageSquare,alt:this.props.file.name,src:URL.createObjectURL(this.props.file)}),this.state.hovered&&r.a.createElement(v.a,{style:ue.closeIcon,onClick:function(){return e.props.onRemove&&e.props.onRemove()}}))},t}(r.a.Component),ue={imageSquare:{height:"108px",width:"108px",border:"1px solid #afafaf",borderRadius:"8px",objectFit:"cover",display:"inline"},closeIcon:{position:"relative",bottom:"91px",right:"20px",width:"0px",cursor:"pointer"}},de=function(e){function t(){return e.apply(this,arguments)||this}S(t,e);var n=t.prototype;return n.renderFiles=function(){var e=this;return this.props.files.map((function(t,n){return r.a.createElement(he,{file:t,key:"thumb_"+n,onRemove:function(){return e.props.onRemove&&e.props.onRemove(n)}})}))},n.render=function(){return r.a.createElement("div",{style:{width:"calc(100% - 24px)",paddingLeft:"12px"}},this.renderFiles())},t}(r.a.Component),me=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={hovered:!1,files:[]},t}S(t,e);var n=t.prototype;return n.onSelect=function(e){var t=[];[].concat(Array(e.target.files.length).keys()).map((function(n){var a=e.target.files[n];t.push(a)})),this.props.onSelectFiles&&this.props.onSelectFiles(t)},n.render=function(){var e=this;return r.a.createElement("form",{className:"uploader",encType:"multipart/form-data",style:{height:"0px"}},r.a.createElement("label",{htmlFor:"files",id:"upload-document-button",style:{position:"absolute",bottom:"12px",right:"63px",zIndex:"1"}},r.a.createElement(x.a,{onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:this.state.hovered?{fontSize:"20px",color:"#69c0ff",cursor:"pointer"}:{fontSize:"20px",color:"#1890ff"}})),r.a.createElement("input",{multiple:!0,id:"files",accept:"image/x-png,image/gif,image/jpeg",style:{visibility:"hidden"},type:"file",onChange:function(t){return e.onSelect(t)}}))},t}(r.a.Component),fe=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={value:"",files:[]},t}S(t,e);var n=t.prototype;return n.onRemove=function(e){var t=this.state.files;t.splice(e,1),this.setState({files:t})},n.handleChange=function(e){this.setState({value:e.target.value})},n.handleSubmit=function(e){var t=this;e.preventDefault(),function(e,t,n,a){for(var r=new FormData,o=0;o<n.files.length;o++)r.append("attachments",n.files[o],n.files[o].name);r.append("text",n.text),h.a.post(N(e)+"/chats/"+t+"/messages/",r,{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userPassword}}).then((function(e){a&&a(e.data)})).catch((function(e){console.log("Send Messages Error",e)}))}(this.props.creds,this.props.chatId,{text:this.state.value,files:this.state.files},(function(){return t.setState({value:"",files:[]})}))},n.renderFiles=function(){return this.state.files.map((function(e,t){return r.a.createElement("div",{key:"file_"+t},r.a.createElement("img",{style:{maxHeight:"66px",maxWidth:"66px"},src:URL.createObjectURL(e),alt:e.name}))}))},n.render=function(){var e=this;return r.a.createElement("div",{style:ge.messageFormContainer,id:"msg-form-container"},r.a.createElement(de,{files:this.state.files,onRemove:function(t){return e.onRemove(t)}}),r.a.createElement(me,{onSelectFiles:function(t){return e.setState({files:t})}}),r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{style:ge.inputContainer},r.a.createElement(K,{label:"Send a message...",value:this.state.value,handleChange:this.handleChange.bind(this),onSubmit:this.handleSubmit.bind(this)}),r.a.createElement(z,{type:"submit",icon:"send",style:{position:"absolute",bottom:"5px",right:"6px"}}))))},t}(r.a.Component),ge={messageFormContainer:{position:"absolute",bottom:"0px",width:"100%",backgroundColor:"rgb(255, 255, 255, 0.92)"},inputContainer:{overflow:"hidden",width:"calc(100% - 2px)",minHeight:"38px",borderRadius:"24px",backgroundColor:"white",border:"1px solid rgb(217, 217, 217)"}},ve=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={duration:0},t}S(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;setTimeout((function(){e.setState({duration:100})}),3e3)},n.renderMessages=function(){var e=this,t=this.props,n=t.messages,a=t.chats,o=t.chatId,s=a&&a[o],i=Object.keys(n);return i.map((function(t,a){var o=n[t],l=0==a?null:i[a-1],c=a==i.length-1?null:i[a+1];return r.a.createElement(pe,{key:"message_"+a,chat:s,message:o,creds:e.props.creds,lastMessage:n[l],nextMessage:n[c]})}))},n.scrollToBottom=function(){b.animateScroll.scrollToBottom({duration:this.state.duration,containerId:"feed-container"})},n.componentDidUpdate=function(){this.scrollToBottom()},n.render=function(){var e=this.props,t=e.chats,n=e.creds,a=e.chatId,o=t&&t[a];return null===n?r.a.createElement(J,null):void 0===n?r.a.createElement(H,null):n&&null!==t&&c.a.isEmpty(t)?r.a.createElement(q,null):r.a.createElement("div",{style:{display:"flex",maxHeight:"100vh",backgroundColor:"#f0f0f0"}},r.a.createElement(j,{chat:o}),r.a.createElement("div",{style:xe.feedContainer,id:"feed-container"},r.a.createElement("div",{style:{height:"88px"}}),this.renderMessages(),r.a.createElement("div",{id:"feet-bottom",style:{height:"42px"}})),r.a.createElement(fe,{chatId:a,creds:n}))},t}(a.Component),xe={feedContainer:{position:"absolute",top:"0px",height:"100%",width:"100%",overflow:"scroll",backgroundColor:"white"}},ye=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={activeChat:null,value:""},t}S(t,e);var n=t.prototype;return n.handleChange=function(e){this.setState({value:e.target.value})},n.handleSubmit=function(e){var t,n,a;e.preventDefault(),t=this.props.creds,n=this.props.chat.id,a={title:this.state.value},h.a.patch(N(t)+"/chats/"+n+"/",a,{headers:{"Public-Key":t.publicKey,"User-Name":t.userName,"User-Secret":t.userPassword}}).then((function(e){})).catch((function(e){console.log("Edit Chat Error",e)}))},n.componentDidUpdate=function(){this.props.chat.title!==this.state.value&&this.state.activeChat!==this.props.chat.id&&this.setState({value:this.props.chat.title,activeChat:this.props.chat.id})},n.render=function(){return r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement(_,{label:"Rename this Chat",value:this.state.value,default:this.props.chat.title,handleChange:this.handleChange.bind(this),style:{fontSize:"16px",fontWeight:"600",textAlign:"center",border:"0px solid white",width:"calc(100% - 24px)"}}))},t}(r.a.Component),Ee=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={selected:!1},t}S(t,e);var n=t.prototype;return n.onRemovePerson=function(){var e,t,n;e=this.props.creds,t=this.props.chat.id,n=this.props.person.person,h.a.put(N(e)+"/chats/"+t+"/people/",{username:n},{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userPassword}}).then((function(e){})).catch((function(e){console.log("Delete Person Error",e)}))},n.render=function(){var e=this,t=this.props,n=t.person,a=t.chat,o=t.creds;return n?r.a.createElement("div",{onMouseEnter:function(){return e.setState({selected:!0})},onMouseLeave:function(){return e.setState({selected:!1})}},r.a.createElement("div",{style:{padding:"2px",height:"0px"}},r.a.createElement(se,{text:n.person})),r.a.createElement("div",{style:{paddingLeft:"52px",height:"44px",position:"relative",top:"10px",fontSize:"15px"}},n.person!==a.admin?n.person:n.person+" (Admin)"),this.state.selected&&o.userName===a.admin&&n.person!==a.admin&&r.a.createElement("div",{style:{float:"right",height:"0px",position:"relative",bottom:"44px"}},r.a.createElement(z,{theme:"danger",icon:"delete",onClick:function(){return e.onRemovePerson()}}))):r.a.createElement("div",null)},t}(a.Component),Ce=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={value:""},t}S(t,e);var n=t.prototype;return n.handleChange=function(e){this.setState({value:e.target.value})},n.handleSubmit=function(e){var t,n,a,r,o=this;e.preventDefault(),t=this.props.creds,n=this.props.chat.id,a=this.state.value,r=function(){return o.setState({value:""})},h.a.post(N(t)+"/chats/"+n+"/people/",{username:a},{headers:{"Public-Key":t.publicKey,"User-Name":t.userName,"User-Secret":t.userPassword}}).then((function(e){r&&r(e.data)})).catch((function(e){console.log("New Person Error",e)}))},n.render=function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement(_,{label:"Type a username",value:this.state.value,handleChange:function(t){return e.handleChange(t)},style:{width:"calc(100% - 24px)",marginBottom:"12px"}}),r.a.createElement(z,{type:"submit",value:"Add Group Member",icon:"user-add",style:{width:"100%",marginBottom:"12px"}}))},t}(r.a.Component),be=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={collapsed:!1},t}S(t,e);var n=t.prototype;return n.renderPeople=function(e){var t=this;return e.map((function(e,n){return r.a.createElement(Ee,{key:"person_"+n,person:e,creds:t.props.creds,chat:t.props.chat})}))},n.render=function(){var e=this,t=this.props,n=t.creds,a=t.chat;return a?r.a.createElement("div",{style:{borderTop:"1px solid #f0f0f0",paddingBottom:"12px"}},r.a.createElement("div",{style:{fontSize:"17px",padding:"12px",paddingBottom:"0px",fontWeight:"600"}},"People"),this.state.collapsed?r.a.createElement(y.a,{style:we.collapseIcon,onClick:function(){return e.setState({collapsed:!1})}}):r.a.createElement(E.a,{style:we.collapseIcon,onClick:function(){return e.setState({collapsed:!0})}}),!this.state.collapsed&&r.a.createElement("div",null,r.a.createElement("div",{style:{height:"12px"}}),this.renderPeople(a.people),r.a.createElement("div",{style:{height:"12px"}}),a.admin===n.userName&&r.a.createElement(Ce,{creds:n,chat:a}))):r.a.createElement("div",null)},t}(r.a.Component),we={collapseIcon:{float:"right",position:"relative",bottom:"18px"}},Se=function(e){function t(){return e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=this.props.attachment;return e?r.a.createElement("div",{style:Me.container},r.a.createElement("div",{style:{paddingTop:"100%"}}),r.a.createElement("img",{alt:e.id,style:Me.image,src:e.file,id:"image-"+e.id})):r.a.createElement("div",null)},t}(r.a.Component),Me={container:{position:"relative",width:"calc(33% - 2px)",border:"1px solid white",display:"inline-block",cursor:"pointer"},image:{top:"0px",width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},Ae=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={collapsed:!1},t}S(t,e);var n=t.prototype;return n.renderPhotos=function(e){return e.map((function(e,t){return r.a.createElement(Se,{key:"person_"+t,attachment:e})}))},n.render=function(){var e=this,t=this.props.chat;return t?r.a.createElement("div",{style:{borderTop:"1px solid #f0f0f0",paddingBottom:"12px"}},r.a.createElement("div",{style:{fontSize:"17px",padding:"12px",paddingBottom:"0px",fontWeight:"600"}},"Photos"),this.state.collapsed?r.a.createElement(y.a,{style:ke.collapseIcon,onClick:function(){return e.setState({collapsed:!1})}}):r.a.createElement(E.a,{style:ke.collapseIcon,onClick:function(){return e.setState({collapsed:!0})}}),!this.state.collapsed&&r.a.createElement("div",null,r.a.createElement("div",{style:{height:"12px"}}),this.renderPhotos(t.attachments))):r.a.createElement("div",null)},t}(r.a.Component),ke={collapseIcon:{float:"right",position:"relative",bottom:"18px"}},Re=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={collapsed:!1},t}return S(t,e),t.prototype.render=function(){var e=this,t=this.props.chat;return t?r.a.createElement("div",{style:{borderTop:"1px solid #f0f0f0",paddingBottom:"12px"}},r.a.createElement("div",{style:{fontSize:"17px",padding:"12px",paddingBottom:"0px",fontWeight:"600"}},"Options"),this.state.collapsed?r.a.createElement(y.a,{style:Ne.collapseIcon,onClick:function(){return e.setState({collapsed:!1})}}):r.a.createElement(E.a,{style:Ne.collapseIcon,onClick:function(){return e.setState({collapsed:!0})}}),!this.state.collapsed&&r.a.createElement("div",null,r.a.createElement("div",{style:{height:"12px"}}),r.a.createElement(z,{value:"Delete",theme:"danger",icon:"delete",onClick:function(){return e=creds,n=t.id,void h.a.delete(N(e)+"/chats/"+n+"/",{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userPassword}}).then((function(e){})).catch((function(e){console.log("Delete Chat Error",e)}));var e,n},style:{width:"100%",marginBottom:"12px"}}))):r.a.createElement("div",null)},t}(r.a.Component),Ne={collapseIcon:{float:"right",position:"relative",bottom:"18px"}},Pe=function(e){function t(){return e.apply(this,arguments)||this}S(t,e);var n=t.prototype;return n.renderOnePerson=function(e){return r.a.createElement(C.Col,{xs:6,style:{paddingTop:"22px",height:"80px"}},r.a.createElement("div",{style:{margin:"auto",width:"33%"}},r.a.createElement(se,{text:e[0].person})))},n.renderTwoPeople=function(e){return r.a.createElement(C.Col,{xs:6,style:{paddingTop:"22px",height:"80px"}},r.a.createElement("div",{style:{margin:"auto",width:"50%"}},r.a.createElement(se,{text:e[0].person,style:{float:"left",position:"relative",right:"5px"}}),r.a.createElement(se,{text:e[1].person,style:{float:"right",position:"relative",left:"5px",bottom:"44px",zIndex:11}})))},n.renderThreePeople=function(e){return r.a.createElement(C.Col,{xs:6,style:{paddingTop:"22px",height:"80px"}},r.a.createElement("div",{style:{margin:"auto",width:"50%"}},r.a.createElement(se,{text:e[0].person,style:{float:"right",position:"relative",right:"28px",top:"10px",zIndex:11}}),r.a.createElement(se,{text:e[1].person,style:{float:"right",position:"relative",right:"14px",bottom:"56px",zIndex:11}}),r.a.createElement(se,{text:e[2].person,style:{float:"right",position:"relative",left:"5px",bottom:"78px",zIndex:11}})))},n.render=function(){var e=this.props,t=e.chat,n=e.creds,a=t?t.people.slice(0,3):[];return t?r.a.createElement("div",{style:De.settingsContainer},r.a.createElement("div",{style:{width:"90%",paddingLeft:"5%"}},r.a.createElement(C.Row,null,r.a.createElement(C.Col,{xs:3}),1==a.length&&this.renderOnePerson(a),2==a.length&&this.renderTwoPeople(a),3==a.length&&this.renderThreePeople(a),r.a.createElement(C.Col,{xs:3})),r.a.createElement(ye,{chat:t,creds:n}),r.a.createElement(be,{creds:n,chat:t}),r.a.createElement(Ae,{chat:t}),t.admin===n.userName&&r.a.createElement(Re,{chat:t}))):r.a.createElement("div",{style:{display:"flex",width:"90%",paddingLeft:"5%",borderLeft:"1px solid #afafaf"}})},t}(a.Component),De={settingsContainer:{height:"100%",overflow:"scroll",borderLeft:"1px solid #afafaf",backgroundColor:"white"}};Object(C.setConfiguration)({maxScreenClass:"xl",gutterWidth:0});var Te=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={creds:null,chats:null,messages:{},activeChat:null},t}S(t,e);var n=t.prototype;return n.onConnect=function(e){var t;this.setState({creds:e}),t=e,h.a.get(N(t)+"/chats/",{headers:{"Public-Key":t.publicKey,"User-Name":t.userName,"User-Secret":t.userPassword}}).then((function(e){200===e.status&&t.onGetChats&&t.onGetChats(e.data)})).catch((function(e){console.log("Fetch Chats Error",e)})),this.props.onConnect&&this.props.onConnect(e)},n.onFailAuth=function(e){this.setState({creds:void 0}),this.props.onFailAuth&&this.props.onFailAuth(e)},n.setActiveChat=function(e){this.setState({activeChat:e}),function(e,t){h.a.get(N(e)+"/chats/"+t+"/messages/",{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userPassword}}).then((function(n){200===n.status&&e.onGetMessages&&e.onGetMessages(t,n.data)})).catch((function(e){console.log("Fetch Messages Error",e)}))}(this.state.creds,e)},n.onGetChats=function(e){e.length>0&&this.setActiveChat(e[0].id),this.setState({chats:c.a.mapKeys(e,"id")}),this.props.onGetChats&&this.props.onGetChats(e)},n.onNewChat=function(e){var t=this.state.chats;t[e.id]=e,this.setState({chats:t,activeChat:e.id}),this.props.onNewChat&&this.props.onNewChat(e)},n.onEditChat=function(e){var t=this.state.chats;t[e.id]=e,this.setState({chats:t}),this.props.onEditChat&&this.props.onEditChat(e)},n.onDeleteChat=function(e){var t=this.state.chats;t[e.id]=void 0,this.setState({chats:t}),this.props.onDeleteChat&&this.props.onDeleteChat(e)},n.onGetMessages=function(e,t){this.setState({messages:c.a.mapKeys(t,"id")});var n=t[t.length-1].id;P(this.state.creds,this.state.activeChat,n),this.props.onGetMessages&&this.props.onGetMessages(e,t)},n.onNewMessage=function(e,t){if(e===this.state.activeChat){var n=this.state.messages;n[t.id]=t,this.setState({messages:n})}P(this.state.creds,this.state.activeChat,t.id),this.props.onNewMessage&&this.props.onNewMessage(e,t)},n.onEditMessage=function(e,t){if(e===this.state.activeChat){var n=this.state.messages;n[t.id]=t,this.setState({messages:n})}this.props.onEditMessage&&this.props.onEditMessage(e,t)},n.onDeleteMessage=function(e,t){if(e===this.state.activeChat){var n=this.state.messages;n[t.id]=void 0,this.setState({messages:n})}this.props.onDeleteMessage&&this.props.onDeleteMessage(e,t)},n.render=function(){var e=this,t=this.props.height;return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(R,w({},this.props,{onConnect:function(t){return e.onConnect(t)},onFailAuth:function(t){return e.onFailAuth(t)},onGetChats:function(t){return e.onGetChats(t)},onNewChat:function(t){return e.onNewChat(t)},onEditChat:function(t){return e.onEditChat(t)},onDeleteChat:function(t){return e.onDeleteChat(t)},onAddPerson:function(t){return e.onEditChat(t)},onRemovePerson:function(t){return e.onEditChat(t)},onGetMessages:function(t,n){return e.onGetMessages(t,n)},onNewMessage:function(t,n){return e.onNewMessage(t,n)},onEditMessage:function(t,n){return e.onEditMessage(t,n)},onDeleteMessage:function(t,n){return e.onDeleteMessage(t,n)}})),r.a.createElement(C.Row,null,r.a.createElement(C.Col,{sm:3,style:{height:t||"",overflow:"scroll"}},r.a.createElement(O,{creds:this.state.creds,chats:this.state.chats,activeChat:this.state.activeChat,onChatClick:function(t){return e.setActiveChat(t)},renderNewChatForm:this.props.renderNewChatForm})),r.a.createElement(C.Col,{sm:6,style:{height:t||"",overflow:"scroll"}},r.a.createElement(ve,{creds:this.state.creds,chats:this.state.chats,chatId:this.state.activeChat,messages:this.state.messages})),r.a.createElement(C.Col,{sm:3,style:{height:t||"",overflow:"scroll"}},r.a.createElement(Pe,{creds:this.state.creds,chat:this.state.chats&&this.state.chats[this.state.activeChat]}))))},t}(a.Component),Fe=function(e){return e.hideExample?r.a.createElement(R,e):r.a.createElement(Te,e)};var ze=function(e){return r.a.createElement(Fe,e)},Ie=[{userName:"Adam_La_Morre",userPassword:"pass1234"}];function _e(){var e=Ie[Math.floor(Math.random()*Ie.length)];return r.a.createElement("div",{style:{width:"100vw",backgroundColor:"#e6f7ff",paddingTop:"2vh",paddingBottom:"6vh"}},r.a.createElement(ze,{development:!0,publicKey:"1ed59673-1fd6-46ed-9eb9-56239a6a4f82",userName:e.userName,userPassword:e.userPassword,height:"88vh"}))}s.a.render(r.a.createElement(_e,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.3cdaa25a.chunk.js.map